{
  "space_id": "01f10d0ff5771c2e807536dd10bff876",
  "title": "Link_Customer",
  "description": "This Genie room provides information about the relationship with the customer and DC. Each customer is by default associated with a DC.",
  "warehouse_id": "b9771bcf4a3a5399",
  "serialized_space": "{\n  \"version\": 2,\n  \"data_sources\": {\n    \"tables\": [\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.dim_customer\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"customer_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for the customer, used to join with link_dc_customer records.\"\n            ]\n          },\n          {\n            \"column_name\": \"latitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic latitude of the customer's location.\"\n            ]\n          },\n          {\n            \"column_name\": \"location\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The city or province where the customer is located.\"\n            ]\n          },\n          {\n            \"column_name\": \"longitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic longitude of the customer's location.\"\n            ]\n          },\n          {\n            \"column_name\": \"name\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The name of the customer store or retail location.\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Customers assigned to Distribution Centers in the supply chain network. Used to show customer names and locations when viewing DC-customer relationships.\"\n        ]\n      },\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"latitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic latitude of the DC for mapping service territory.\"\n            ]\n          },\n          {\n            \"column_name\": \"location\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The city or province where the Distribution Center is located.\"\n            ]\n          },\n          {\n            \"column_name\": \"location_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for the Distribution Center. Referenced by location_id in link_dc_customer.\"\n            ]\n          },\n          {\n            \"column_name\": \"location_name\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The name of the Distribution Center assigned to service the customer.\"\n            ]\n          },\n          {\n            \"column_name\": \"longitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic longitude of the DC for mapping service territory.\"\n            ]\n          },\n          {\n            \"column_name\": \"type\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The type of storage location (e.g., Distribution Center, warehouse, or retail store).\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Distribution Centers that are assigned to service customers. Used to show DC names and locations when viewing customer-to-DC assignments.\"\n        ]\n      },\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.link_dc_customer\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"created_timestamp\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"The timestamp when this DC-customer assignment was created.\"\n            ]\n          },\n          {\n            \"column_name\": \"customer_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"The customer in this DC relationship. Joins to customer_id in dim_customer.\"\n            ]\n          },\n          {\n            \"column_name\": \"is_active\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Indicates whether this DC-customer assignment is currently active. Filter to is_active = true for current assignments.\"\n            ]\n          },\n          {\n            \"column_name\": \"link_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for this DC-customer assignment record.\"\n            ]\n          },\n          {\n            \"column_name\": \"location_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"The Distribution Center assigned to service this customer. Joins to location_id in dim_storage_location.\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Mapping of customers to their assigned Distribution Center. Each customer is assigned to exactly one DC. Used to determine which customers each DC serves and manage DC-customer relationships.\"\n        ]\n      }\n    ]\n  },\n  \"instructions\": {\n    \"text_instructions\": [\n      {\n        \"id\": \"0000000000000000000000000000000d\",\n        \"content\": [\n          \"Each customer is assigned to exactly one DC (Distribution Center) by default. is_active = true means the relationship is currently active.\\nlocation_id in link_dc_customer refers to the DC and joins to location_id in dim_storage_location.\\nWhen listing customers for a DC, filter to is_active = true unless historical data is explicitly requested.\"\n        ]\n      }\n    ],\n    \"example_question_sqls\": [\n      {\n        \"id\": \"0000000000000000000000000000000e\",\n        \"question\": [\n          \"How many active customers does each DC serve?\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  sl.location_name AS dc_name,\\n\",\n          \"  sl.location,\\n\",\n          \"  COUNT(ldc.customer_id) AS active_customer_count\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.link_dc_customer ldc\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location sl ON ldc.location_id = sl.location_id\\n\",\n          \"WHERE ldc.is_active = true\\n\",\n          \"GROUP BY sl.location_name, sl.location\\n\",\n          \"ORDER BY active_customer_count DESC\"\n        ]\n      },\n      {\n        \"id\": \"0000000000000000000000000000000f\",\n        \"question\": [\n          \"Show me all customers and their assigned DC\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  dc.name AS customer_name,\\n\",\n          \"  dc.location AS customer_location,\\n\",\n          \"  sl.location_name AS assigned_dc,\\n\",\n          \"  sl.location AS dc_location,\\n\",\n          \"  ldc.is_active\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.link_dc_customer ldc\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_customer dc ON ldc.customer_id = dc.customer_id\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location sl ON ldc.location_id = sl.location_id\\n\",\n          \"ORDER BY sl.location_name, dc.name\"\n        ]\n      },\n      {\n        \"id\": \"00000000000000000000000000000010\",\n        \"question\": [\n          \"Which DC has the most customers?\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  sl.location_name AS dc_name,\\n\",\n          \"  sl.location,\\n\",\n          \"  COUNT(ldc.customer_id) AS total_customers\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.link_dc_customer ldc\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location sl ON ldc.location_id = sl.location_id\\n\",\n          \"GROUP BY sl.location_name, sl.location\\n\",\n          \"ORDER BY total_customers DESC\\n\",\n          \"LIMIT 1\"\n        ]\n      }\n    ]\n  }\n}\n"
}