{
  "space_id": "01f10d0ff6ae1729b72b938a9c294daf",
  "title": "Supplier Orders",
  "description": "This space provides the Purchase order details to the supplier and their expected lead time.",
  "warehouse_id": "b9771bcf4a3a5399",
  "serialized_space": "{\n  \"version\": 2,\n  \"data_sources\": {\n    \"tables\": [\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.dim_product\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"cost_per_unit\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unit cost of the product, used to calculate total order value (qty \\u00d7 cost_per_unit).\"\n            ]\n          },\n          {\n            \"column_name\": \"name\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The name of the product being ordered from the supplier.\"\n            ]\n          },\n          {\n            \"column_name\": \"product_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for the product, used to join with supplier order records.\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Product catalog for items ordered from suppliers. Used to identify products on order and calculate total purchase order value.\"\n        ]\n      },\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"latitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic latitude of the storage location.\"\n            ]\n          },\n          {\n            \"column_name\": \"location\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The city or province where the storage location is situated.\"\n            ]\n          },\n          {\n            \"column_name\": \"location_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for the storage location or Distribution Center.\"\n            ]\n          },\n          {\n            \"column_name\": \"location_name\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The name of the storage location or Distribution Center.\"\n            ]\n          },\n          {\n            \"column_name\": \"longitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic longitude of the storage location.\"\n            ]\n          },\n          {\n            \"column_name\": \"type\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The type of storage location (e.g., Distribution Center, warehouse, or retail store).\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"The table contains information about various storage locations within the supply chain. It includes details such as the location's name, type, and geographical coordinates (latitude and longitude). This data can be used for analyzing supply chain logistics, optimizing storage strategies, and understanding the geographical distribution of storage facilities.\"\n        ]\n      },\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.dim_supplier\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"latitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic latitude of the supplier's location for mapping the supplier network.\"\n            ]\n          },\n          {\n            \"column_name\": \"location\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The city or province where the supplier is located.\"\n            ]\n          },\n          {\n            \"column_name\": \"longitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic longitude of the supplier's location for mapping the supplier network.\"\n            ]\n          },\n          {\n            \"column_name\": \"name\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The name of the supplier or vendor fulfilling the purchase orders.\"\n            ]\n          },\n          {\n            \"column_name\": \"supplier_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for the supplier, used to join with supplier order records.\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Suppliers who fulfill purchase orders for product replenishment. Used to analyze order volumes, compare lead times, and view supplier locations.\"\n        ]\n      },\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"expected_arrival_date\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Calendar date the order is expected to arrive (derived from snapshot_date + expected_arrival_days).\"\n            ]\n          },\n          {\n            \"column_name\": \"expected_arrival_days\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Lead time in days from order placement to expected delivery. Lower values indicate faster suppliers.\"\n            ]\n          },\n          {\n            \"column_name\": \"order_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for each purchase order.\"\n            ]\n          },\n          {\n            \"column_name\": \"product_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"The product being ordered. Joins to product_id in dim_product.\"\n            ]\n          },\n          {\n            \"column_name\": \"qty\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Quantity of product ordered in this purchase order.\"\n            ]\n          },\n          {\n            \"column_name\": \"snapshot_date\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Date the order data was captured. Filter to MAX(snapshot_date) for current orders.\"\n            ]\n          },\n          {\n            \"column_name\": \"supplier_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"The supplier fulfilling this order. Joins to supplier_id in dim_supplier.\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Purchase orders placed with suppliers for product replenishment. Used to track order quantities, monitor supplier lead times, and identify overdue deliveries. An order is overdue if expected_arrival_date < CURRENT_DATE().\"\n        ]\n      }\n    ]\n  },\n  \"instructions\": {\n    \"text_instructions\": [\n      {\n        \"id\": \"00000000000000000000000000000011\",\n        \"content\": [\n          \"expected_arrival_days is the lead time in days from order placement to delivery. A lower value means faster delivery.\\nOrder value = qty multiplied by cost_per_unit from dim_product.\\nFilter to the latest snapshot_date unless the user asks for historical trends.\\nWhen reporting on suppliers, always include their location for geographic context.\\nAn order is considered overdue if expected_arrival_date is earlier than today (CURRENT_DATE()).\"\n        ]\n      }\n    ],\n    \"example_question_sqls\": [\n      {\n        \"id\": \"00000000000000000000000000000012\",\n        \"question\": [\n          \"Which supplier has the longest average lead time?\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  s.name AS supplier_name,\\n\",\n          \"  s.location AS supplier_location,\\n\",\n          \"  ROUND(AVG(fso.expected_arrival_days), 1) AS avg_lead_time_days,\\n\",\n          \"  COUNT(fso.order_id) AS order_count\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders fso\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_supplier s ON fso.supplier_id = s.supplier_id\\n\",\n          \"WHERE fso.snapshot_date = (SELECT MAX(snapshot_date) FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders)\\n\",\n          \"GROUP BY s.name, s.location\\n\",\n          \"ORDER BY avg_lead_time_days DESC\"\n        ]\n      },\n      {\n        \"id\": \"00000000000000000000000000000013\",\n        \"question\": [\n          \"What is the total order value by supplier?\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  s.name AS supplier_name,\\n\",\n          \"  s.location AS supplier_location,\\n\",\n          \"  SUM(fso.qty * p.cost_per_unit) AS total_order_value,\\n\",\n          \"  SUM(fso.qty) AS total_qty_ordered\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders fso\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_supplier s ON fso.supplier_id = s.supplier_id\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_product p ON fso.product_id = p.product_id\\n\",\n          \"WHERE fso.snapshot_date = (SELECT MAX(snapshot_date) FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders)\\n\",\n          \"GROUP BY s.name, s.location\\n\",\n          \"ORDER BY total_order_value DESC\"\n        ]\n      },\n      {\n        \"id\": \"00000000000000000000000000000014\",\n        \"question\": [\n          \"Show me all overdue orders\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  fso.order_id,\\n\",\n          \"  s.name AS supplier_name,\\n\",\n          \"  p.name AS product_name,\\n\",\n          \"  fso.qty,\\n\",\n          \"  fso.expected_arrival_date,\\n\",\n          \"  DATEDIFF(CURRENT_DATE(), fso.expected_arrival_date) AS days_overdue\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders fso\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_supplier s ON fso.supplier_id = s.supplier_id\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_product p ON fso.product_id = p.product_id\\n\",\n          \"WHERE fso.snapshot_date = (SELECT MAX(snapshot_date) FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders)\\n\",\n          \"  AND fso.expected_arrival_date < CURRENT_DATE()\\n\",\n          \"ORDER BY days_overdue DESC\"\n        ]\n      },\n      {\n        \"id\": \"00000000000000000000000000000015\",\n        \"question\": [\n          \"What are the top 5 products by total quantity on order?\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  p.name AS product_name,\\n\",\n          \"  SUM(fso.qty) AS total_qty_on_order,\\n\",\n          \"  SUM(fso.qty * p.cost_per_unit) AS total_order_value,\\n\",\n          \"  COUNT(DISTINCT fso.supplier_id) AS supplier_count\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders fso\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_product p ON fso.product_id = p.product_id\\n\",\n          \"WHERE fso.snapshot_date = (SELECT MAX(snapshot_date) FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_supplier_orders)\\n\",\n          \"GROUP BY p.name\\n\",\n          \"ORDER BY total_qty_on_order DESC\\n\",\n          \"LIMIT 5\"\n        ]\n      }\n    ]\n  }\n}\n"
}