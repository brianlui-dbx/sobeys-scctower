{
  "space_id": "01f10d0ff2f119a5b62015b6d842e697",
  "title": "Incoming Supply to DC",
  "description": "This Genie space provides info on the Incoming supply to DC and its expected arrival time",
  "warehouse_id": "b9771bcf4a3a5399",
  "serialized_space": "{\n  \"version\": 2,\n  \"data_sources\": {\n    \"tables\": [\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.dim_product\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"cost_per_unit\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unit cost of the product, used to calculate the value of incoming shipments (qty \\u00d7 cost_per_unit).\"\n            ]\n          },\n          {\n            \"column_name\": \"name\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The name of the product included in the incoming supply shipment.\"\n            ]\n          },\n          {\n            \"column_name\": \"product_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for the product, used to join with incoming supply records.\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Product catalog for items in incoming supply shipments. Used to identify what products are en route to DCs and calculate incoming shipment value.\"\n        ]\n      },\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"latitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic latitude for mapping shipment routes.\"\n            ]\n          },\n          {\n            \"column_name\": \"location\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The city or province of the storage location.\"\n            ]\n          },\n          {\n            \"column_name\": \"location_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for the storage location. Referenced by source_location_id and destination_dc_id in fact_incoming_supply.\"\n            ]\n          },\n          {\n            \"column_name\": \"location_name\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The name of the storage location\\u2014either the shipment's origin warehouse or the destination Distribution Center.\"\n            ]\n          },\n          {\n            \"column_name\": \"longitude\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Geographic longitude for mapping shipment routes.\"\n            ]\n          },\n          {\n            \"column_name\": \"type\",\n            \"enable_format_assistance\": true,\n            \"enable_entity_matching\": true,\n            \"description\": [\n              \"The type of storage location (e.g., Distribution Center, warehouse, or supplier facility).\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Storage locations serving as either the origin or destination of incoming supply shipments. Join twice\\u2014once for the source (src) and once for the destination DC (dest).\"\n        ]\n      },\n      {\n        \"identifier\": \"snowflake_retail_consumer_goods.supply_chain_control_tower.fact_incoming_supply\",\n        \"column_configs\": [\n          {\n            \"column_name\": \"destination_dc_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"The destination Distribution Center receiving the shipment. Joins to location_id in dim_storage_location (use alias 'dest').\"\n            ]\n          },\n          {\n            \"column_name\": \"expected_arrival_date\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Calendar date the shipment is expected to arrive at the destination DC.\"\n            ]\n          },\n          {\n            \"column_name\": \"expected_arrival_days\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Number of days from snapshot_date until the shipment is expected to arrive at the destination DC.\"\n            ]\n          },\n          {\n            \"column_name\": \"product_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"The product being shipped. Joins to product_id in dim_product.\"\n            ]\n          },\n          {\n            \"column_name\": \"qty\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Quantity of product in this incoming supply shipment.\"\n            ]\n          },\n          {\n            \"column_name\": \"shipment_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Unique identifier for the incoming supply shipment.\"\n            ]\n          },\n          {\n            \"column_name\": \"snapshot_date\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"Date the shipment data was captured. Filter to MAX(snapshot_date) for current incoming supply.\"\n            ]\n          },\n          {\n            \"column_name\": \"source_location_id\",\n            \"enable_format_assistance\": true,\n            \"description\": [\n              \"The origin of the shipment. Joins to location_id in dim_storage_location (use alias 'src').\"\n            ]\n          }\n        ],\n        \"description\": [\n          \"Incoming supply shipments en route to Distribution Centers from supplier or other warehouse locations. Used to forecast inventory replenishment and monitor expected arrival times.\"\n        ]\n      }\n    ]\n  },\n  \"instructions\": {\n    \"text_instructions\": [\n      {\n        \"id\": \"00000000000000000000000000000009\",\n        \"content\": [\n          \"destination_dc_id is the receiving DC; source_location_id is the origin. Both join to location_id in dim_storage_location. Use aliases 'dest' and 'src' when joining dim_storage_location twice.\\nexpected_arrival_days is the number of days from snapshot_date until the shipment arrives. expected_arrival_date is the calculated calendar date.\\nFilter to the latest snapshot_date unless the user asks for historical data.\\nShipment value = qty multiplied by cost_per_unit from dim_product.\"\n        ]\n      }\n    ],\n    \"example_question_sqls\": [\n      {\n        \"id\": \"0000000000000000000000000000000a\",\n        \"question\": [\n          \"What is the total incoming supply quantity by destination DC?\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  sl.location_name AS dc_name,\\n\",\n          \"  sl.location,\\n\",\n          \"  COUNT(DISTINCT fis.shipment_id) AS shipment_count,\\n\",\n          \"  SUM(fis.qty) AS total_incoming_qty\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_incoming_supply fis\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location sl ON fis.destination_dc_id = sl.location_id\\n\",\n          \"WHERE fis.snapshot_date = (SELECT MAX(snapshot_date) FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_incoming_supply)\\n\",\n          \"GROUP BY sl.location_name, sl.location\\n\",\n          \"ORDER BY total_incoming_qty DESC\"\n        ]\n      },\n      {\n        \"id\": \"0000000000000000000000000000000b\",\n        \"question\": [\n          \"Which shipments are arriving in the next 3 days?\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  fis.shipment_id,\\n\",\n          \"  p.name AS product_name,\\n\",\n          \"  dest.location_name AS destination_dc,\\n\",\n          \"  src.location_name AS source_location,\\n\",\n          \"  fis.qty,\\n\",\n          \"  fis.expected_arrival_date,\\n\",\n          \"  fis.expected_arrival_days\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_incoming_supply fis\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_product p ON fis.product_id = p.product_id\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location dest ON fis.destination_dc_id = dest.location_id\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_storage_location src ON fis.source_location_id = src.location_id\\n\",\n          \"WHERE fis.snapshot_date = (SELECT MAX(snapshot_date) FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_incoming_supply)\\n\",\n          \"  AND fis.expected_arrival_days <= 3\\n\",\n          \"ORDER BY fis.expected_arrival_days ASC\"\n        ]\n      },\n      {\n        \"id\": \"0000000000000000000000000000000c\",\n        \"question\": [\n          \"What is the total value of incoming supply by product?\"\n        ],\n        \"sql\": [\n          \"SELECT\\n\",\n          \"  p.name AS product_name,\\n\",\n          \"  SUM(fis.qty) AS total_incoming_qty,\\n\",\n          \"  SUM(fis.qty * p.cost_per_unit) AS total_value\\n\",\n          \"FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_incoming_supply fis\\n\",\n          \"JOIN snowflake_retail_consumer_goods.supply_chain_control_tower.dim_product p ON fis.product_id = p.product_id\\n\",\n          \"WHERE fis.snapshot_date = (SELECT MAX(snapshot_date) FROM snowflake_retail_consumer_goods.supply_chain_control_tower.fact_incoming_supply)\\n\",\n          \"GROUP BY p.name\\n\",\n          \"ORDER BY total_value DESC\"\n        ]\n      }\n    ]\n  }\n}\n"
}